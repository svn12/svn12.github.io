<!DOCTYPE html><html lang="zh-tw"><head><meta charset="UTF-8">
<title>Regex YT ID</title>

<style>
        form {
            margin: 0px;
            display: inline-block;
            font-size: 18px;
			/* background-color: yellow;  */
			width:95%;
        }
		
        input1,select,h3{
            margin: 0px;
            display: inline;
            font-size: 18px;
        }

        
        button {
            font-size: 18px;
        }
	</style>
</head> 
<body>


<h1>The Regex Method to get YT List Id</h1>
<h3><a href='https://regexr.com/'>Regexr</a> &emsp;</h3>
<h3><a href='https://regex101.com/'>Regex測試</a> &emsp;</h3>
<h3><a href='https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions'>Regex js Guide</a> &emsp;</h3>
<h3><a href='https://ithelp.ithome.com.tw/articles/10197315'>Regex例子 </a>&emsp;</h3>
<h3><a href='https://regexone.com/'>Regex習題 </a>&emsp;</h3>
<h3><a href='https://regexone.com/references/javascript'>Regex js</a>&emsp;</h3>
<h3><a href='https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions/Groups_and_Backreferences#try_it'>Regex Try</a>&emsp;</h3>
<p id="demo">
regPlaylist = /[?&]list=([^#\&\?]+)/<br><br>
VID_REGEX = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/ <br><br>
VID_REGEX2=/youtu(?:.*\/v\/|.*v\=|\.be\/|.*?embed\/)([A-Za-z0-9_\-]{11})/<br><br>
YT_List= https://www.youtube.com/watch?v=1lyu1KKwC74&list=RDCLAK5uy_mfut9V_o1n9nVG_m5yZ3ztCif29AHUffI&index=4 <br><br>
YT=https://www.youtube.com/watch?v=uZusDFpPDWM<br><br>
</p>
<p id="demo1"></p>

<h3><form action="/action_page.php">
  <label for="fname">YT List</label>
  <input type="text" id="fname" name="fname">
  <button type="button" class="btn  btn-primary "  onclick="Query_stk()" >Get Id</button>
</form></h3>
 <p id="enc" ></p>
 
  <p id="dec" ></p>
<script>

function Query_stk(){
// https://www.youtube.com/watch?v=1lyu1KKwC74&list=RDCLAK5uy_mfut9V_o1n9nVG_m5yZ3ztCif29AHUffI&index=4
    const url=document.getElementById("fname").value
	const VID_REGEX = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/
	const VID_REGEX2=/youtu(?:.*\/v\/|.*v\=|\.be\/|.*?embed\/)([A-Za-z0-9_\-]{11})/
    const regPlaylist = /[?&]list=([^#\&\?]+)/;
	document.getElementById("enc").innerHTML ="<h3>YT List URL</h3>" +url;
	if( url.match(regPlaylist)==null  ){
			if(url.match(VID_REGEX)!=null ){
				let video_id = url.match(VID_REGEX)[2];   // same VID_REGEX.exe(url)[2]
				let video_id2 = url.match(VID_REGEX2)[1]; 
				document.getElementById("dec").innerHTML =`<h3>Playlist ID:</h3>Error<br><h3>Video ID :</h3>${video_id}<br><h3>Video ID2:</h3>${video_id2}`;
				}
			else{
				document.getElementById("dec").innerHTML =`<h3>Playlist ID:</h3>Illegal PlayList` ;
			}
		
		}
	 else
	{
		let playlist_id = url.match(regPlaylist)[1];
		
		let video_id = url.match(VID_REGEX)[2];   // same VID_REGEX.exe(url)[2]
		let video_id2 = url.match(VID_REGEX2)[1];   // same VID_REGEX.exe(url)[2]
		//const uri_encoded=document.getElementById("lname").value
		document.getElementById("dec").innerHTML =`<h3>Playlist ID:</h3>${playlist_id}<br><h3>Video ID :</h3>${video_id}<br><h3>Video ID2:</h3>${video_id2}` ;
	}
	
}
</script>

</body>
</html>

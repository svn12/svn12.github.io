 <!DOCTYPE html><html lang="zh"">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
        <title>聽讀聖經</title>
        <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script> -->
        <!-- <script src="https://code.jquery.com/jquery-1.9.1.js"></script> -->
        <!-- <link rel="stylesheet" href="reset.css"> -->
        <style type="text/css">
            @font-face {
                font-family: "jsfont";
                src: url("../doc/jf-openhuninn-2.0.ttf");
                /*src: url("https://github.com/justfont/open-huninn-font/blob/master/font/jf-openhuninn-2.0.ttf"); */
              }
              body{
                font-family: 蘋方黑體, 華康麗黑體, DFKai-SB, Helvetica, Arial,
                sans-serif, serif, "jsfont";
              }
            td {
                            display: table-cell;
                            vertical-align: inherit;
                            }
            table {
                    border-collapse: separate;
                    text-indent: initial;
                    border-spacing: 2px;
                    }
            form{margin:0px; display:inline;font-size:16px; }
            button{margin:0px; display:inline;font-size:16px; }
            /* label {display:inline;} */
            /* input {display:inline;} */
            select {font-size:18px;}
            .fixed-bottom {
                    position: fixed;
                    right: 0;
                    /* bottom: 0; */
                    /* left: 0; */
                    display:none;
                    /* z-index: $zindex-fixed; */
                    /* bottom: 0; */
                    /* right: 0; */
                    /* border-left: 1px solid black; */
                    /* border-top: 1px solid black; */
                    /* background: red; */
                    }
                            
            .container {
                max-width: 1920px;
            }
            
            .sticky {
                /* position: fixed; */
                /* bottom: 0; */
                /* right:0; */
                display:inline-block;
                /* width: 100%; */
                /* background: rgba(0, 0, 0, 0.35); */
                /* z-index: $zindex-fixed; */
                transition: all 1.5s ease;

                }
			input:hover ,input:focus ,select:hover {
				  background-color: yellow;
				}
        </style>
    <link rel="stylesheet" href="link_P.css">
</head>
<body> 
    
<div class="container">


<br>
<nav class="navbar fixed-bottom navbar-dark bg-dark">
    <button class="btn btn-primary pull-right " id="previous" onclick=$(window).scrollTop(0)>Top</button>
    <!-- <button class="btn btn-primary" id="next" onclick="readBook('next')">下一章</button>
	<body onload="Iniload()" > 
	-->
</nav>



<h3> <a id="fhl_b" target="_blank"  href="https://bible.fhl.net/NUI/#/bible/gen/1">信望愛聖經</a></h3>
<h3> <a id="taiwan_Bible" target="_blank" href="https://bible.fhl.net/NUI/_rwd/#/bible/%E5%89%B51:3-7.Ro1:1-5">電子聖經</a></h2>
<!-- <h2> <a  target="_blank"  href="https://bible.fhl.net/fhl_mobile/">手機聖經</a></h2>
<!-- <h2> <a id="new_b2" target="_blank"  href="https://mygoodfriend.net/TCV_Big5/">現代中文</a></h2> 

<h2> <a id="taiwan_Bible" target="_blank" href="https://www.lingshyang.com/taiwan_Bible/mak/mak14.htm">台語聖經</a></h2> -->
<!-- <h3> <a  target="_blank"  href="http://taiwanesebible.blogspot.com/">台漢本</a></h3> -->
<h3> <a  target="_blank"  href="./台漢本聖經_link_P.html">台漢本掃描</a></h3>
<h3> <a  target="_blank"  href="https://t224568.github.io/youtube/%E5%8D%97%E9%96%80%E6%89%8B%E6%8A%84%E8%81%96%E7%B6%93.html">南門手抄聖經</a></h3>
<h3> <a  target="_blank"  href="https://svn12.github.io/%E6%9F%A5%E8%81%96%E8%A9%A9.html">聖詩啟應文</a></h3>
<br>
<br>
<form >
    
    聖經:
    <select id="SelTitle" onchange="fSelTitle()">

    </select>
    聖經版本:
    <select id="SelBver" onchange="fSelBver()">

    </select>
</form>

<form>
    章:
    <select id="SelChap" onchange="fselChap()">


    </select>

</form>
<button onclick="fselChap()">經文</button>
<input type="text" class="form-inline" placeholder="關鍵字" id="location-input">

<button onclick="query_bible_keyw3()">查詢</button>
<input type="checkbox" id="brief" onchange="query_fhl_bible()"  >全 
<br>

<form id="plaudio" pstate="0" onclick="playaudio()">
    <label class="radio-inline">
        <input type="radio" name="optradio" checked>台語有聲聖經
    </label>
    <label class="radio-inline">
        <input type="radio" name="optradio">和合本有聲聖經
    </label>
    <label class="radio-inline">
        <input type="radio" name="optradio">現代中文有聲聖經
        
    </label>
	<label class="radio-inline">
        <input type="radio" name="optradio">和修本有聲聖經
        
    </label>
    
</form>

<audio id="audio1"  onended="audioendA()"   controls="controls" preload=""  style='display:inline;'>
    
</audio>
 <!-- <button onclick="next_chap()"  >
 <source id="audioSource1" src="" style='display:inline;'>
    </source>
	<source id="audioSource2" src="">
    </source>
	 <source id="audioSource3" src="">
    </source>
    Your browser does not support the audio format.
    下一章</button>-->

<div id="demo1"></div>
 <div id="demo1_2021"></div>
 <div id="demo1_2021A"></div>
 <!-- <p id="demo2">aaa</p> -->
<!-- <audio src="http://www.lingshyang.com/bible/tw_bible_soun/041/41_014.mp3" preload="auto" controls></audio> -->
<p id="bible-2010" target="_blank" src="http://rcuv.hkbs.org.hk/RCUV2/ECC/1/"></p>


<!-- <iframe id="taiwan_Bible" src="https://www.lingshyang.com/taiwan_Bible/mak/mak14.htm" width=100% height="400px" frameborder="0" ></iframe> -->
<br>
<div id='ytaudio' data-video="ZoepYC3t6UA" data-state="0"  data-autoplay="0" data-loop="1" class="youtube-audio"></div>
<div id="demo50"></div>
<div id="demo5"></div>
<audio id="audio2"  onended="audioendA()"  controls="controls">
    
</audio>

<div id="demo30"></div>
<div id="demo3"></div>
<br>

<audio id="audio3"  onended="audioendA()"  controls="controls">
   
</audio>

<div id="demo40"></div>
 <div id="demo4"></div>
 
<!-- <button onclick=$(window).scrollTop(0)>
    backtoTop</button>    -->

 
 <div id="demo6"></div>
<p  id="bible-room" src="https://www.lingshyang.com/bible-room/mak/mak14.htm" width=100% height="400px" frameborder="0" ></p>
<!-- <iframe  id="bible_twn_roma" src="https://www.sl-pc.org.tw/bible/3/ECC/1" width=100% height="400px" frameborder="0" ></iframe> -->

<p id="bible_5" src="https://www.lingshyang.com/bible_5/mak/mak14.htm" frameborder="0"></p>
<!-- <iframe id="new_bible2" src="http://bible.goodjob.tw/tcv_b5/2135.htm" frameborder="0"></iframe> -->
<ip id="new_bible" src="https://www.lingshyang.com/new_bible/mak/mak14.htm" frameborder="0"></ip>
<p id="bible2010" src="http://rcuv.hkbs.org.hk/RCUV2/ECC/1/" frameborder="0"></p>
<!-- <iframe id="bbe_bible" src="https://www.lingshyang.com/bbe_bible/mak/mak14.htm" frameborder="0"></iframe> -->

<br>

 </div> 

<!--  <p id="test">original</p> -->


<!-- <p id="test2">audio2</p> -->
<script>
	let bible_info=[],bible_detail=[];
	$(document).ready(function() {
  //GSname();
  
	Read_Bible();
	Iniload();
	})
var r;	
const RSheet2Json_APIV6='https://script.google.com/macros/s/AKfycbz-Q9lP3QXasQwyCT6pegSR7eu23AQUKTkd3iv5WcZLvoxIaH0m41_W0av5Ncc3LTwoQw/exec'
function  Read_Bible(){
	const fmain='https://docs.google.com/spreadsheets/d/1yt3EfSIVBi-NOvoeqwEtp-DcnIODM9LK84alJLh9JJI/edit?usp=sharing';
	  
	let	a = {
		sheetUrl:fmain,
		sheetTag: '和修本 ' //'Test'
		}
	
	$.get(RSheet2Json_APIV6, a, function (data) {    
	 
		$.each(data, function (i, item) {
			if(i!=0){
				
				bible_detail.push({	YTid:item[3]});
			}
		})
		console.log(`bible_detail ---- ${bible_detail.length}`);
		//Google_sht_R();
		a = {
			sheetUrl:fmain,
			sheetTag: '卷聖經' //'Test'
			};
		
	
		
	$.get(RSheet2Json_APIV6, a, function (data) {    
	   
	//	console.log(data);
		
			$.each(data, function (i, item) {
				if(i!=0){
					
					bible_info.push({S_ptr:item[6]-1});
				}
			})
		console.log(`bible_info ---- ${bible_info.length}`);
		})
		
		
		
		
		});
		
	 
	}
    function pauseaudio() {
            
            for (var i = 1; i < 4; i++) {
                audio = document.getElementById('audio' + i);
                audio.pause();
            }
			//r.pauseVideo();
            
        }
		
   /* function playaudio_3(){
       
        $('input[name="optradio"]')[1].checked = true; //radio 賦值==>第二個選項選取
        playaudio()
    }
    function playaudio_4(){
       
        $('input[name="optradio"]')[2].checked = true; //radio 賦值==>第二個選項選取
        playaudio()
    }
    */
    function playaudio(){
        if($("#demo3 > h1").text().indexOf(')')>0) {
          
            fselChap();
        }
        var audios = document.getElementsByName('optradio');
       // pauseaudio();
	   
        var audio_value;
		console.log(`audios length ---${audios.length}`);
        for (var i = 0; i < audios.length; i++) {
            
            if (audios[i].checked) {
				console.log(`Audio checked---${i}`);
				if(i<3){
					console.log(`r.videoTitle---${r.videoTitle}`);
					if(r.videoTitle!=""){
						r.pauseVideo();}
				
				document.querySelector('#ytaudio>img').src='https://i.imgur.com/quyUPXN.png';
                audio = document.getElementById('audio' + (i+1));
				
				//audio.oncanplaythrough = (event) => {
					audio.play();
					console.log(`Play Audio  audio${i+1}`);
					
				document.querySelector('#ytaudio').dataset.state='0';
				}else{
					pauseaudio();
					r.playVideo();
					document.querySelector('#ytaudio>img').src='https://i.imgur.com/IDzX9gL.png';
					document.querySelector('#ytaudio').dataset.state='1';
				}
                switch (i){
                    case 1:
                        $(window).scrollTop($('#demo30').offset().top);
                        break;
                    case 2:
                        $(window).scrollTop($('#demo40').offset().top);
                        break;;
                    case 3:
                        $(window).scrollTop($('#demo50').offset().top);
                        break;
                    default: 
                        // $(window).scrollTop($('#SelTitle').offset().top);
                        $(window).scrollTop(0);

                }
                break;
            }
        }
    }
    function nextchap() {
           if (document.getElementById("SelChap").options.length== document.getElementById("SelChap").selectedIndex+1){
                if (document.getElementById("SelTitle").options.length == document.getElementById("SelTitle").selectedIndex + 1){

                }
                else{
                    document.getElementById("SelTitle").selectedIndex++
                    fSelTitle();
                   
                }
        }
        else {
            
            document.getElementById("SelChap").selectedIndex++
            
            fselChap();
            

        }
        }
    function audioend1() {
        audioend(1)
    }
     function audioend2() {
            audioend(2)
        }
     function audioend3() {
            audioend(3)
        }
	 function audioendA() {
			let pstatus=!(document.getElementById('audio3').paused
					&&document.getElementById('audio2').paused
					&&document.getElementById('audio1').paused )
					||document.getElementById('audio1').ended
					||document.getElementById('audio2').ended
					||document.getElementById('audio3').ended;
			console.log(`audioendA pstatus: ${pstatus} not ${!pstatus}`);
            nextchap();
			if(pstatus){playaudio();}
        }
    function audioend(ptr){
        
        if (document.getElementById("SelChap").options.length== document.getElementById("SelChap").selectedIndex+1){
                if (document.getElementById("SelTitle").options.length == document.getElementById("SelTitle").selectedIndex + 1){

                }
                else{
                    document.getElementById("SelTitle").selectedIndex++
                    fSelTitle();
                    playaudio();
                }
        }
        else {
            
            document.getElementById("SelChap").selectedIndex++
            
            fselChap();
            playaudio();

        }
    }
	
    function next_chap(){
         let oTop1 = $("#demo30").offset().top - window.innerHeight;
          let oTop2 = $("#demo40").offset().top - window.innerHeight;
         if($(window).scrollTop() > oTop2){
             $('input[name="optradio"]')[2].checked = true;
         } else if($(window).scrollTop() > oTop1){
             $('input[name="optradio"]')[1].checked = true;
         } else {
             $('input[name="optradio"]')[0].checked = true;
         }
            console.log($(window).scrollTop() );
            console.log(oTop1,oTop2);
        if (document.getElementById("SelChap").options.length== document.getElementById("SelChap").selectedIndex+1){
                if (document.getElementById("SelTitle").options.length == document.getElementById("SelTitle").selectedIndex + 1){

                }
                else{
                    document.getElementById("SelTitle").selectedIndex++
                    fSelTitle();
                    // audio = document.getElementById('audio' + ptr);
                    //  audio.play();
                   // playaudio();
                }
        }
        else {
            
            document.getElementById("SelChap").selectedIndex++
            
            fselChap();
            // audio = document.getElementById('audio' + ptr);
            //  audio.play();
         //   playaudio();

        }
    }
    function addOption(n,id) {
        //根據id查詢物件，

        var select = document.getElementById(id);
        

        for (var i = 1; i <= n; i++) {
            // var opt = options[i];
            var el = document.createElement("option");
            el.textContent = i;
            el.value = i;
            select.appendChild(el);
            
        }
      
    }
    function IniTitle(){
        var Btitle=["創世記","出埃及記","利未記","民數記","申命記","約書亞記",
"士師記","路得記","撒母耳記上","撒母耳記下","列王紀上","列王紀下",
"歷代志上","歷代志下","以斯拉記","尼希米記","以斯帖記","約伯記",
"詩篇","箴言","傳道書","雅歌","以賽亞書","耶利米書",
"耶利米哀歌","以西結書","但以理書","何西阿書","約珥書","阿摩司書",
"俄巴底亞書","約拿書","彌迦書","那鴻書","哈巴谷書","西番雅書",
"哈該書","撒迦利亞書","瑪拉基書","馬太福音","馬可福音","路加福音",
"約翰福音","使徒行傳","羅馬人書","哥林多前書","哥林多後書","加拉太書",
"以弗所書","腓立比書","歌羅西書","帖撒羅尼迦前書","帖撒羅尼迦後書","提摩太前書",
"提摩太後書","提多書","腓利門書","希伯來書","雅各書","彼得前書",
"彼得後書","約翰一書","約翰二書","約翰三書","猶大書","啟示錄"
];

        var Btitle_ptr=["gen", "exo", "lev", "num", "deu", "jos",
            "jug", "rut", "1sa", "2sa", "1ki", "2ki",
            "1ch", "2ch", "ezr", "neh", "est", "job",
            "psm", "pro", "ecc", "son", "isa", "jer",
            "lam", "eze", "dan", "hos", "joe", "amo",
            "oba", "jon", "mic", "nah", "hab", "zep",
            "hag", "zec", "mal", "mat", "mak", "luk",
            "jhn", "act", "rom", "1co", "2co", "gal",
            "eph", "phl", "col", "1ts", "2ts", "1ti",
            "2ti", "tit", "mon", "heb", "jas", "1pe",
            "2pe", "1jn", "2jn", "3jn", "jud", "rev"
];
        var select = document.getElementById("SelTitle");
        // var options = ["10", "11", "12", "13", "14","15","16"];
        // alert(id, select.options[1].value);

        for (var i = 1; i <= Btitle.length; i++) {
            // var opt = options[i];
            var el = document.createElement("option");
            el.textContent = Btitle[i-1];
            el.value = Btitle_ptr[i-1];
            select.appendChild(el);
            // select.options.add(el);
            // alert(select.options[i-1].value);
        }
        var Bver=["KJV","BBE","ASV","WEB","Darby","ERV",
            "紅皮聖經全羅","紅皮聖經漢羅","巴克禮漢羅","現代台語2021全羅","現代台語2021漢字","現代臺語2013全羅",
			"現代臺語2013漢字","馬雅各全羅","全民台語聖經全羅",
            "全民台語聖經漢羅","恢復本","深文理和合本","新遺詔聖經","現代客語全羅","汕頭客語聖經",
            "中文標準譯本","NET聖經中譯本","四福音書共同譯本","現代中文譯本2019版","呂振中譯本","思高譯本",
            "官話和合本","北京官話譯本","文理和合本","淺文理和合本","王元德官話譯本","俄羅斯正教文理譯本",
            "白日昇徐約翰文理譯本","神天聖書","文理委辦譯本","施約瑟淺文理譯本","馬殊曼譯本","高德譯本",
            "胡德邁譯本","粦為仁譯本","日語聖經","舊約馬索拉原文","新約原文","越南聖經",
            "俄文聖經","韓文聖經","鄒語聖經","魯凱語聖經","阿美語1997","阿美語2019",
            "賽德克語","達悟語新約聖經","藏語聖經"
];

        var Bver_ptr=["kjv","bbe","asv","web","darby","erv",
            "apskcl","apskhl","bklhl","ttvcl2021","ttvhl2021","tte",
			"ttvh","prebklcl","sgebklcl",
            "sgebklhl","recover","wlunv","nt1864","thv2e","hakka",
            "csb","cnet","cccbst","tcv2019","lcc","ofm",
            "cumv","pmb","cuwv","cuwve","cwang","orthdox",
            "basset","mormil","wdv","ssewb","marwb","goddwb",
            "hudsonwb","deanwb","jp","bhs","fhlwh","vietnamese",
            "russian","korean","tsou","rukai","ams","amis2",
            "sed","ttnt94","tibet"
];
        var select = document.getElementById("SelBver");
        // var options = ["10", "11", "12", "13", "14","15","16"];
        // alert(id, select.options[1].value);

        for (var i = 1; i <= Bver.length; i++) {
            // var opt = options[i];
            var el = document.createElement("option");
            el.textContent = Bver[i-1];
            el.value = Bver_ptr[i-1];
            select.appendChild(el);
            // select.options.add(el);
            // alert(select.options[i-1].value);
        }


    }
    function get_Title_Chap_Cnt(){
         var chap_cnt = ["50", "40", "27", "36", "34", "24",
            "21", "4", "31", "24", "22", "25",
            "29", "36", "10", "13", "10", "42",
            "150", "31", "12", "8", "66", "52",
            "5", "48", "12", "14", "3", "9",
            "1", "4", "7", "3", "3", "3",
            "2", "14", "4", "28", "16", "24",
            "21", "28", "16", "16", "13", "6",
            "6", "4", "4", "5", "3", "6",
            "4", "3", "1", "13", "5", "5",
            "3", "5", "1", "1", "1", "22"

        ];
        return chap_cnt[document.getElementById("SelTitle").selectedIndex];
    }
    function get_new_bible2_p_old() {
            var chap_ptr1 = [1047, 1098, 1139, 1167, 1204, 1239,
            1264, 1286, 1291, 1323, 1348, 1371,
            1397, 1427, 1464, 1475, 1489, 1501,
            1544, 1695, 1727, 1740, 1749, 1890,
            1945, 1951, 2000, 2013, 2028, 2032,
            2042, 2044, 2049, 2057, 2061, 2065,
            2069, 2072, 2087, 2093, 2122, 2139,
            2164, 2186, 2215, 2232, 2249, 2263,
            2270, 2277, 2282, 2287, 2293, 2297,
            2304, 2309, 2313, 2315, 2329, 2335,
            2341, 2345, 2351, 2353, 2355, 2357
            ];
            return chap_ptr1[document.getElementById("SelTitle").selectedIndex];
        }
        function get_new_bible2_p() {
                var chap_ptr = ["01C", "02C", "03C", "04C", "05C", "06C",
                "07C", "08C", "09C", "10C", "11C", "12C",
                "13C", "14C", "15C", "16C", "17C", "18C",
                "19C", "20C", "21C", "22C", "23C", "24C",
                "25C", "26C", "27C", "28C", "29C", "30C",
                "31C", "32C", "33C", "34C", "35C", "36C",
                "37C", "38C", "39C", "40C", "41C", "42C",
                "43C", "44C", "45C", "46C", "47C", "48C",
                "49C", "50C", "51C", "52C", "53C", "54C",
                "55C", "56C", "57C", "58C", "59C", "60C",
                "61C", "62C", "63C", "64C", "65C", "66C"
                ];
                return chap_ptr[document.getElementById("SelTitle").selectedIndex];
            }
    function IniChap(){
              

        var select = document.getElementById("SelTitle").selectedIndex;
        // alert(select);
        document.getElementById("SelChap").options.length = 0;
        // addOption(chap_cnt[select], "SelChap")
        // alert(get_Title_Chap_Cnt());
        addOption(get_Title_Chap_Cnt(), "SelChap");
       fselChap();
    }
    function fSelTitle(){
        
        // alert(get_Title_Chap_Cnt());
        IniChap();
    }
    function Iniload(){
        IniTitle();
        // addOption(17, "SelChap")
        IniChap();
        query_fhl_bible();
    }
    function changeSrc() {
        var xhead="https://www.lingshyang.com/"
        var num= document.getElementById("SelChap").value
        var lead_num=""
        if(num<10)
        {
            lead_num = ""
        }
        var src_ptr= document.getElementById("SelTitle").options[document.getElementById("SelTitle").selectedIndex].value;
        // alert(src_ptr);
        // var xtail = "/mak/mak"+lead_num+num+".htm";
        var xtail = "/"+src_ptr+"/"+src_ptr + lead_num + num + ".htm";
        // var ids = ["taiwan_Bible", "bible-room", "bible_5", "new_bible","bbe_bible"];
        var ids = [ "bible-room", "bible_5", "new_bible"];
        var i = 0;
       // document.getElementById("test1").innerHTML = document.getElementById(ids[i]).src = xhead + ids[i] + xtail;
        while (ids[i]) {
            // text += ids[i] + "<br>";
            document.getElementById(ids[i]).href = xhead + ids[i] + xtail;
            i++;
        }
        
       
        // xhead="http://bible.goodjob.tw/tcv_b5/";
        xhead="http://mygoodfriend.net/TCV_Big5/B";
        lead_num = "";
        if (num < 10) {
            lead_num = "00";
            
        } else
            if(num<100){
                lead_num="0";
            }

        //   alert(xhead + get_new_bible2_p() + lead_num + num + ".htm" );//+ lead_num + num + ".htm")  ;
             
        // document.getElementById("new_bible2").src =
        //      xhead+(num-1+get_new_bible2_p())+".htm";
             document.getElementById("bible-2010").src = "http://rcuv.hkbs.org.hk/RCUV2/"+ src_ptr+"/" +
             lead_num + num ;
            document.getElementById("fhl_b").href = "https://bible.fhl.net/NUI/#/bible/"+ src_ptr+"/" +
              num ;

            query_fhl_bible();
			
		//   
			YTId=bible_detail[bible_info[document.getElementById("SelTitle").selectedIndex].S_ptr+document.getElementById("SelChap").selectedIndex].YTid;
		
				document.querySelector('#ytaudio').dataset.video=YTId;
			const list = document.querySelector('#ytaudio');
			while (list.hasChildNodes()) {
				list.removeChild(list.firstChild);
			}
               onYouTubeIframeAPIReady();  
    } 
	
	async function getJSON(url) {
	try {
		  const response = await fetch(url);
		  //let myText = await response.json();//JSON.parse(myObject);// myObject.text();JSON.parse(data)
		  return response.json();// myObject.text();JSON.parse(data)
		} catch (error) {
		return(error);
		}
  
	}

    async function show_bible(url,ptr,chap) {
		const obj = await getJSON(url);
        
           
                // $("#demo2").html('');
                let txt='<br> <h1 align="center">'+ obj.v_name+'</h1>';
                    // txt += '<table  class="table  table-hover "> <thead><tr>';
                     txt += '<table  class="table"> <tbody>';

                for (x in obj.record){
                // $("#demo2").append ("<br>"+chap+":"+obj.record[x].sec+" "+obj.record[x]["bible_text"]+ "<br>"+chap+":"+obj2.record[x].sec+" "+obj2.record[x]["bible_text"]);
                    txt += "<tr>";
                    txt += '<td valign="top"> <font size="-1">'+
                            chap+":"+obj.record[x].sec + "</font> </td>";
                    txt += "<td>" + obj.record[x]["bible_text"] + "</td>";
                    txt += "</tr>";

                }
                txt += "</tbody></table>"
                $(ptr).html(txt);          
        
    }
    function fSelBver(){
        
        var Btitle_ptr_c=["創","出","利","民","申","書",
                "士","得","撒上","撒下","王上","王下",
                "代上","代下","拉","尼","斯","伯",
                "詩","箴","傳","歌","賽","耶",
                "哀","結","但","何","珥","摩",
                "俄","拿","彌","鴻","哈","番",
                "該","亞","瑪","太","可","路",
                "約","徒","羅","林前","林後","加",
                "弗","腓","西","帖前","帖後","提前",
                "提後","多","門","來","雅","彼前",
                "彼後","約一","約二","約三","猶","啟"
                ];
         var chap= $("#SelChap").val();

         
         var src_ptr= document.getElementById("SelTitle").selectedIndex;
         var selectedBVer= $('#SelBver option:selected').val();
        uri=Btitle_ptr_c[src_ptr];
        url='https://bible.fhl.net/json/qb.php?chineses='+encodeURI(uri)+'&chap='+chap+'&version='+selectedBVer+'&strong=0&gb=0';
        show_bible(url,"#demo6",chap);
        $(window).scrollTop($('#demo6').offset().top);
    }
    async function query_fhl_bible(){
        var Btitle_ptr_c=["創","出","利","民","申","書",
                "士","得","撒上","撒下","王上","王下",
                "代上","代下","拉","尼","斯","伯",
                "詩","箴","傳","歌","賽","耶",
                "哀","結","但","何","珥","摩",
                "俄","拿","彌","鴻","哈","番",
                "該","亞","瑪","太","可","路",
                "約","徒","羅","林前","林後","加",
                "弗","腓","西","帖前","帖後","提前",
                "提後","多","門","來","雅","彼前",
                "彼後","約一","約二","約三","猶","啟"
                ];
         var chap= document.getElementById("SelChap").value

         
         var src_ptr= document.getElementById("SelTitle").selectedIndex;
         var selectedBVer= $('#SelBver option:selected').val();
        uri=Btitle_ptr_c[src_ptr];
        url='https://bible.fhl.net/json/qb.php?chineses='+encodeURI(uri)+'&chap='+chap+'&version=bklcl&strong=0&gb=0'
        const url2=url.replace('bklcl','tghg')
		const  url_2021=url.replace('bklcl',"ttvcl2021")
		const  url2_2021=url.replace('bklcl',"ttvhl2021")
		const detail=($('#brief').is(':checked'));
		$("#demo1").html(""); 
		const obj = await getJSON(url);
		const obj2 = await getJSON(url2);
		const obj3 = await getJSON(url_2021);
		const obj4 = await getJSON(url2_2021);
		let v_name=obj.v_name
        if(detail){
			v_name+='/'+obj3.v_name
		}
			let txt='<br> <h1 align="center">'+ v_name+'</h1>';
				// txt += '<table  class="table  table-hover "> <thead><tr>';
				 txt += '<table  class="table"> <tbody>';

			for (x in obj.record){
			// $("#demo2").append ("<br>"+chap+":"+obj.record[x].sec+" "+obj.record[x]["bible_text"]+ "<br>"+chap+":"+obj2.record[x].sec+" "+obj2.record[x]["bible_text"]);
				txt += "<tr>";
				txt += '<td valign="top"> <font size="-1">'+
						chap+":"+obj.record[x].sec + "</font> </td>";
				txt += "<td>" + obj.record[x]["bible_text"] + "</td>";
				txt += "</tr>";

				txt += "<tr>";
				txt += '<td valign="top"> <font size="-1">'+
						'' + "</font> </td>";
				txt += "<td>" + obj2.record[x]["bible_text"] + "</td>";
				txt += "</tr>";
				if(detail){
					txt += "<tr>";
					txt += '<td valign="top"> <font size="-1">'+
							'' + "</font> </td>";
					txt += "<td>" + obj3.record[x]["bible_text"] + "</td>";
					txt += "</tr>";
					txt += "<tr>";
					txt += '<td valign="top"> <font size="-1">'+
							'' + "</font> </td>";
					txt += "<td>" + obj4.record[x]["bible_text"] + "</td>";
					txt += "</tr>";
				}
			}
			txt += "</tbody></table>"
			$("#demo1_2021A").html(txt);
		
            
        

//

        url3=url.replace('bklcl','unv')
        url4=url.replace('bklcl','tcv95')
        url5=url.replace('bklcl','rcuv')
		
        show_bible(url3,"#demo3",chap);
        show_bible(url4,"#demo4",chap);
        show_bible(url5,"#demo5",chap);

        url6=url.replace('bklcl',selectedBVer)
        show_bible(url6,"#demo6",chap);
        var audios = document.getElementsByName('optradio');
        for (var i = 0; i < audios.length; i++) {
             if (audios[i].checked) {
				if(i<4){
				if(!document.querySelector(`#audio${i+1}`).paused){
					document.querySelector(`#audio${i+1}`).play();
					}
				}
                switch (i){
                    case 1:
                        $(window).scrollTop($('#demo30').offset().top);
                        break;
                    case 2:
                        $(window).scrollTop($('#demo40').offset().top);
                        break;
					case 3:
                        $(window).scrollTop($('#demo50').offset().top);
                        break;
                    default: 
                        // $(window).scrollTop($('#SelTitle').offset().top);
                        $(window).scrollTop(0);

                }
            }
        }


    }
    function query_bible_keyw(){
        var qstr=encodeURI($("#location-input").val());
        qstr1="AAA"
        $("#demo1").html(qstr1);
        $("#demo1_2021").html(qstr1);
        $("#demo3").html(qstr1);
        $("#demo4").html(qstr1);
        $("#demo5").html(qstr1);
    }
  function q_bible_keyw(url,ptr,VerTitle){
    $(ptr).html('');
        $.get(url,  function (data,status) {
            var obj = JSON.parse(data);
            
            var txt='<br> <h1 align="center">'+ VerTitle+" (" +obj.record_count.toString()+')</h1>';
            
            txt += '<table  class="table"> <tbody>';
            
            for (x in obj.record){
                                
                //    url2=url2.replace("bklcl", "tghg");
                txt += "<tr>";
                txt += '<td valign="top"> <font size="-1">'+obj.record[x].chineses+''+                           obj.record[x].chap.toString()+":"+obj.record[x].sec.toString() + "</font> </td>";
                txt += "<td>" + obj.record[x]["bible_text"] + "</td>";
                txt += "</tr>";

            };
                    
                    txt += "</tbody></table>"
                    $(ptr).html(txt);
                     
            
        })
  }
  function query_bible_keyw3(){
         var qstr=encodeURI($("#location-input").val());
        if(qstr=='') {
            return;
        }
        pauseaudio();
        var selectedBVer= $('#SelBver option:selected');
        
        url="https://bible.fhl.net/json/se.php?orig=0&limit=500&offset=0" + "&q=" + qstr + "&VERSION=tghg&strong=0&gb=0"
        q_bible_keyw(url.replace('tghg',selectedBVer.val()),"#demo6",selectedBVer.text());
        q_bible_keyw(url,"#demo1","台語漢羅");// _2021
		//q_bible_keyw(url.replace('tghg','ttvhl2021'),"#demo1_2021","2021台語漢羅");// _2021
		q_bible_keyw(url.replace('tghg','ttvhl2021'),"#demo1_2021A","2021台語漢羅");// _2021
        q_bible_keyw(url.replace('tghg','unv'),"#demo3","和合本");
        q_bible_keyw(url.replace('tghg','tcv95'),"#demo4","現代中文譯本");
        q_bible_keyw(url.replace('tghg','rcuv'),"#demo5","和修本");
       
        
    }  
  function fselChap() {
        var audio_type=["Taiwanese","unv1","tcv"]
        var lead_num = "";
        var num= document.getElementById("SelChap").value ;
        if (num < 100) {
            if(num<10) { lead_num = "00";}
            else
                lead_num = "0";
        }
       
        // var audio_src_h = "https://www.lingshyang.com/bible/tw_bible_soun/" + "041/41_";
        let pstatus=document.getElementById('audio3').paused
					&&document.getElementById('audio2').paused
					&&document.getElementById('audio1').paused 
        var audio_ptr= document.getElementById("SelTitle").selectedIndex+1;
        
        var audio_src_h = "https://media.fhl.net/" + audio_type[1] + "/" + audio_ptr + "/" + audio_ptr + "_"; //"41/41_";
       
    //    document.getElementById("test1").innerHTML = audio_src_h + lead_num + num + ".mp3";
       
        var audio_src = audio_src_h + lead_num + num + ".mp3";
        var audio = document.getElementById('audio2');
     //   var source = document.getElementById('audioSource2');
        
        audio.src = audio_src;
        
        audio.load(); //call this to just preload the audio without playing
        
        audio_src_h = "https://media.fhl.net/" + audio_type[2] + "/" + audio_ptr + "C/" + audio_ptr + "_"; //"41/41_";
      // document.getElementById("test1").innerHTML = audio_src_h + lead_num + num + ".mp3";
        audio_src = audio_src_h + lead_num + num + ".mp3";
        audio = document.getElementById('audio3');
      //  source = document.getElementById('audioSource3');
        audio.src = audio_src;
        audio.load(); //call this to just preload the audio without playing
        
        audio_src_h = "https://media.fhl.net/"+audio_type[0]+"/" + audio_ptr+"/"+audio_ptr+"_"; //"41/41_";
        // document.getElementById("test1").innerHTML = audio_src_h + lead_num + num + ".mp3";
        audio_src = audio_src_h + lead_num +num + ".mp3";
        audio = document.getElementById('audio1');
      //  source = document.getElementById('audioSource1');
        audio.src = audio_src; 
        audio.load(); //call this to just preload the audio without playing

		changeSrc();
		console.log(` fselChap pstatus: ${pstatus} not ${!pstatus}`);
		if(!pstatus){
			console.log(`fselChap call playaudio`);
				playaudio(); 
			}
     //   audio.play(); //call this to play the song right away
    };

  
        /**
     *
     *  sticky navigation
     *
            */

        let navbar = $(".navbar");

        $(window).scroll(function () {
        // get the complete hight of window
        let oTop = $(".radio-inline").offset().top ;
        //console.log(oTop,$(window).scrollTop(),window.innerHeight);
        if ($(window).scrollTop() >= oTop) {
            navbar.addClass("sticky");
        } else {
            navbar.removeClass("sticky");
        }
        });
  var	audi1=document.getElementById('audio1');
var	audi2=document.getElementById('audio2')
var	audi3=document.getElementById('audio3')

audi1.onplaying=function(){
	audi2.pause();
	audi3.pause();
	
	$('input[name="optradio"]')[0].checked = true;
	}	
audi2.onplaying=function(){
	audi1.pause();
	audi3.pause();
	
	$('input[name="optradio"]')[1].checked = true;
	}	
		
audi3.onplaying=function(){
	audi1.pause();
	audi2.pause();
	
	$('input[name="optradio"]')[2].checked = true;
	}	
 var tag = document.createElement('script');

tag.src = "https://www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

function onYouTubeIframeAPIReady()
{
	
    var o= function(e, t) 
    // This function switches the imgs, you may want to change it
    {
        var a=e?"IDzX9gL.png":"quyUPXN.png"; 
        //IDzX9gL is the stopped img and quyUPXN the playing img

        t.setAttribute("src","https://i.imgur.com/"+a)
        // folder or web direction the img is in. it can be "./"+a
    };

    
		e = document.querySelector("#ytaudio");

    
        var t=document.createElement("img");

       // t.setAttribute("id","youtube-icon"),
        t.style.cssText="cursor:pointer;cursor:hand",
		t.style.width="30px";
		
	//	t.style.height="30px",
        e.appendChild(t);

        var a=document.createElement("div");

        a.setAttribute("id","youtube-player"),
        e.appendChild(a);

        t.setAttribute("src","https://i.imgur.com/quyUPXN.png");

        e.onclick=function()
        {
            r.getPlayerState()===YT.PlayerState.PLAYING||r.getPlayerState()===YT.PlayerState.BUFFERING?
			(r.pauseVideo(),o(!1, t),e.dataset.state="0"):(r.playVideo(),o(!0, t),e.dataset.state="1",pauseVideo())
        };

         r= new YT.Player("youtube-player",
        {

            height:"200",
            width:"600",
			
            videoId:e.dataset.video,
            playerVars:
            {
                autoplay:e.dataset.autoplay,loop:e.dataset.loop
            },
            events:
            {
                onReady:function(e)
                {
                    r.setPlaybackQuality("small"),
                    o(r.getPlayerState()!==YT.PlayerState.CUED, t)
					if(document.querySelector('#ytaudio').dataset.state=='1'){
					r.playVideo();
					o(1, t);
					$(window).scrollTop($('#demo50').offset().top);
					
					}
                },
                onStateChange:function(e)
                {
					
                   
					e.data===YT.PlayerState.ENDED&&o(!1, t);
				
					//console.log(`e.data: ${e.data} `);
					if(e.data===YT.PlayerState.ENDED){
						
						console.log('End');
						nextchap();
						
					}
                }
            }
        })
		document.querySelector('#youtube-player').style.display='none';

        
    
}
</script>

 </body> </html>
